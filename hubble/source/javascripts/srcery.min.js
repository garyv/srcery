// Srcery -> http://github.com/garyv/srcery
var Srcery=function(){var f=document,l=600,g=window,b,h,e,m,d,q,c,n,r,p,k;imgs=f.querySelectorAll?f.querySelectorAll("img[data-srcset]"):f.getElementsByTagName("img");c=function(){return arguments.length-2?c(arguments[0],arguments[1])!=arguments[2]&&arguments[0].setAttribute(arguments[1],arguments[2]):arguments[0].getAttribute(arguments[1])};n=function(a,b){g.addEventListener?this.addEventListener(a,b,!1):g.attachEvent?this.attachEvent("on"+a,b):this["on"+a]=b};r=function(a){a=a.getBoundingClientRect(); return a.left>=0-l&&a.top<=l+(g.innerHeight||f.documentElement.clientHeight)};p=function(a){if(d=c(a,"data-srcset"))for(c(a,"data-original-src")||c(a,"data-original-src",c(a,"src")),d=d.split(/, ?/),e=0;e<d.length;e++)if(d[e].match(/\dw$/)){if(q=+d[e].match(/\d+(?=w$)/),q<=viewportWidth()){m=d[e].split(/ /)[0];c(a,"src")!=m&&c(a,"src",m);break}}else c(a,"src",d[e])};k=function(){b=0;for(h=imgs.length;b<h;b++)r(imgs[b])&&p(imgs[b])};viewportWidth=function(){return(g.innerWidth||f.body.parentNode.clientWidth)* (g.devicePixelRatio||1)};k();n("scroll",k);n("orientationchange",k);return{setEagerness:function(a){l=a},push:function(a){return imgs.push(a)},now:function(){b=0;for(h=imgs.length;b<h;b++)p(imgs[b])}}}();