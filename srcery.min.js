// Srcery -> http://github.com/garyv/srcery
var Srcery=function(){var f=document,m=2,g=window,b,k,e,n,d,r,c,l,s,p,h,q,t;imgs=f.querySelectorAll?f.querySelectorAll("img[data-srcset]"):f.getElementsByTagName("img");c=function(){return arguments.length-2?c(arguments[0],arguments[1])!=arguments[2]&&arguments[0].setAttribute(arguments[1],arguments[2]):arguments[0].getAttribute(arguments[1])};l=function(a,b){g.addEventListener?this.addEventListener(a,b,!1):g.attachEvent?this.attachEvent("on"+a,b):this["on"+a]=b};s=function(a){a=a.getBoundingClientRect(); return a.left>=0-m*viewportHeight()&&a.top<=m*viewportHeight()};p=function(a){if(d=c(a,"data-srcset"))for(c(a,"data-original-src")||c(a,"data-original-src",c(a,"src")),d=d.split(/, ?/),e=0;e<d.length;e++)if(d[e].match(/\dw$/)){if(r=+d[e].match(/\d+(?=w$)/),r<=t){n=d[e].split(/ /)[0];c(a,"src")!=n&&c(a,"src",n);break}}else c(a,"src",d[e])};h=function(){t=viewportWidth();b=0;for(k=imgs.length;b<k;b++)s(imgs[b])&&p(imgs[b])};viewportHeight=function(){return q=q||g.innerHeight||f.documentElement.clientHeight}; viewportWidth=function(){return(g.innerWidth||f.body.parentNode.clientWidth)*(g.devicePixelRatio||1)};l("load",h);l("orientationchange",function(){q=0;h()});l("scroll",h);h();return{setEagerness:function(a){m=a++},push:function(a){return imgs.push(a)},now:function(){b=0;for(k=imgs.length;b<k;b++)p(imgs[b])}}}();